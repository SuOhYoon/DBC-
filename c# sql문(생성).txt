/* 초기화 */
drop table cart
/
drop table daily_menu
/
drop table daily_sales
/
drop table main_category
/
drop table menu
/
drop table order_table
/
drop table sub_category

/* 대분류코드 테이블 생성*/
CREATE TABLE BIG_CODE 
(
  BIG_CODE VARCHAR2(20) NOT NULL 
, BIG_NAME VARCHAR2(20) 
, CONSTRAINT MAIN_CODE_PK PRIMARY KEY 
  (
    BIG_CODE 
  )
);
/* 소분류코드 테이블 생성*/
CREATE TABLE SMALL_CODE 
(
  SM_CODE VARCHAR2(20) NOT NULL 
, SM_NAME VARCHAR2(20) 
, BIG_CODE VARCHAR2(20) 
, CONSTRAINT SMALL_CODE_PK PRIMARY KEY 
  (
    SM_CODE 
  )
  ENABLE 
);

ALTER TABLE SMALL_CODE
ADD CONSTRAINT SMALL_CODE_FK1 FOREIGN KEY
(
  BIG_CODE 
)
REFERENCES BIG_CODE
(
  BIG_CODE 
)
/* 일일 메뉴 결산 테이블 생성*/
CREATE TABLE DAILY_MENU 
(
  ACCOUNT_DATE DATE NOT NULL 
, MENU_CODE VARCHAR2(20) 
, ORDER_COUNT VARCHAR2(20) 
, SALES_COUNT NUMBER 
, CONSTRAINT DAILY_MENU_PK PRIMARY KEY 
  (
    ACCOUNT_DATE 
  )
);
ALTER TABLE DAILY_MENU
ADD CONSTRAINT DAILY_MENU_FK1 FOREIGN KEY
(
  MENU_CODE 
)
REFERENCES MENU
(
  MENU_CODE 
)
/* 메뉴 테이블 생성*/
CREATE TABLE MENU 
(
  MENU_CODE VARCHAR2(20) NOT NULL 
, NAME VARCHAR2(20) 
, PRICE NUMBER 
, SMALL_CODE NUMBER 
, CONSTRAINT MENU_PK PRIMARY KEY 
  (
    MENU_CODE 
  )
  ENABLE 
);
ALTER TABLE MENU
ADD CONSTRAINT MENU_FK1 FOREIGN KEY
(
  SMALL_CODE 
)
REFERENCES SMALL_CODE
(
  SMALL_CODE 
)
/* 장바구니 테이블 생성*/
CREATE TABLE CART 
(
  CART_CODE NUMBER NOT NULL 
, MENU_CODE NUMBER 
, MANY NUMBER 
, CONSTRAINT CART_PK PRIMARY KEY 
  (
    CART_CODE 
  )
);
ALTER TABLE CART
ADD CONSTRAINT CART_FK1 FOREIGN KEY
(
  MENU_CODE 
)
REFERENCES MENU
(
  MENU_CODE 
)
/* 주문 테이블 생성*/
CREATE TABLE ORDER_ 
(
  OR_CODE NUMBER NOT NULL 
, CART_CODE NUMBER 
, OR_PRICE NUMBER 
, PAYMENT VARCHAR2(20) 
, DISCOUNT VARCHAR2(20) 
, DISCOUNT_PRICE NUMBER 
, TOTAL_PRICE NUMBER 
, PAY_DATE DATE 
, CONSTRAINT ORDER__PK PRIMARY KEY 
  (
    OR_CODE 
  )
  ENABLE 
);

ALTER TABLE ORDER_
ADD CONSTRAINT ORDER__FK1 FOREIGN KEY
(
  CART_CODE 
)
REFERENCES CART
(
  CART_CODE 
)
/* 매출 관리 테이블 생성*/
CREATE TABLE DAILY_SALES 
(
  SALES_DATE DATE NOT NULL 
, SALES_COUNT NUMBER 
, SALES_PRICE NUMBER 
, CONSTRAINT DAILY_SALES_PK PRIMARY KEY 
  (
    SALES_DATE 
  )